# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Accept/Decline —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–®–∞–≥–∏ 3-4)

### API Endpoint
- [x] **`PATCH /api/bookings/[id]/status`** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≥–∏–¥–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Å—Ç–∞—Ç—É—Å = "pending"
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ "accepted" –∏–ª–∏ "declined"
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ `accepted_at` timestamp
  - Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç—É—Ä–∏—Å—Ç—É

### UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [x] –ö–Ω–æ–ø–∫–∏ **Accept** –∏ **Decline** –¥–ª—è pending –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- [x] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–µ–π—Å—Ç–≤–∏—è
- [x] –î–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ (Decline)
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏—è
- [x] –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ (–∑–µ–ª—ë–Ω–∞—è Accept, –∫—Ä–∞—Å–Ω–∞—è Decline)

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [x] Email —Ç—É—Ä–∏—Å—Ç—É –ø—Ä–∏ Accept
- [x] Email —Ç—É—Ä–∏—Å—Ç—É –ø—Ä–∏ Decline
- [x] –°–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è –≥–∏–¥–∞, —Å—Ç–∞—Ç—É—Å –∏ —Å—Å—ã–ª–∫—É –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìù –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Accept/Decline

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

1. **–ï—Å—Ç—å pending –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –°–æ–∑–¥–∞–π—Ç–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∫ —Ç—É—Ä–∏—Å—Ç (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ç–µ—Å—Ç–∞)
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ pending –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

2. **–í–æ—à–ª–∏ –∫–∞–∫ –≥–∏–¥:**
   - ID –≥–∏–¥–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `guide_id` –≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏

---

## üé¨ –¢–µ—Å—Ç 1: Accept (–ü—Ä–∏–Ω—è—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –≥–∏–¥–∞
```
http://localhost:3000/guide/bookings
```

### 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Requests"
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º –æ–¥–Ω–æ pending –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–Ω–æ–ø–∫–∏:
  - **–ó–µ–ª—ë–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "Accept"** —Å –∏–∫–æ–Ω–∫–æ–π ‚úì
  - **–ö—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "Decline"** —Å –∏–∫–æ–Ω–∫–æ–π ‚úó

### 3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Accept"
- –ö–Ω–æ–ø–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ (spinning icon)
- –û–±–µ –∫–Ω–æ–ø–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å disabled –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- [x] –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—á–µ–∑–ª–æ –∏–∑ –≤–∫–ª–∞–¥–∫–∏ "Requests"
- [x] –°—á—ë—Ç—á–∏–∫ "Requests" —É–º–µ–Ω—å—à–∏–ª—Å—è
- [x] –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—è–≤–∏–ª–æ—Å—å –≤–æ –≤–∫–ª–∞–¥–∫–µ "Upcoming"
- [x] –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ "Accepted" (—Å–∏–Ω–∏–π badge)

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```sql
SELECT 
  id, 
  status, 
  accepted_at,
  updated_at
FROM bookings 
WHERE id = 'your-booking-id';
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- `status = 'accepted'`
- `accepted_at` - —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞/–≤—Ä–µ–º—è
- `updated_at` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- –¢—É—Ä–∏—Å—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å email:
  - **–¢–µ–º–∞:** "Booking Accepted - Rainbow Tour Guides"
  - **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–Ω—è—Ç–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
  - **–°—Å—ã–ª–∫–∞:** –ù–∞ –¥–µ—Ç–∞–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üé¨ –¢–µ—Å—Ç 2: Decline (–û—Ç–∫–ª–æ–Ω–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)

### 1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ pending –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ö–∞–∫ —Ç—É—Ä–∏—Å—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –µ—â—ë –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ pending –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ `/guide/bookings` ‚Üí –≤–∫–ª–∞–¥–∫–∞ "Requests"

### 3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Decline"
- –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –¥–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:
  - **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** "Decline Booking Request?"
  - **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è—Ö
  - **–ö–Ω–æ–ø–∫–∏:** "Keep Request" –∏ "Yes, Decline"

### 4. –ù–∞–∂–º–∏—Ç–µ "Yes, Decline"
- –î–∏–∞–ª–æ–≥ –¥–æ–ª–∂–µ–Ω –∑–∞–∫—Ä—ã—Ç—å—Å—è
- –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- [x] –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—á–µ–∑–ª–æ –∏–∑ –≤–∫–ª–∞–¥–∫–∏ "Requests"
- [x] –°—á—ë—Ç—á–∏–∫ "Requests" —É–º–µ–Ω—å—à–∏–ª—Å—è
- [x] –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—è–≤–∏–ª–æ—Å—å –≤–æ –≤–∫–ª–∞–¥–∫–µ "Cancelled"
- [x] –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ "Declined" (–∫—Ä–∞—Å–Ω—ã–π badge)

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```sql
SELECT 
  id, 
  status, 
  updated_at
FROM bookings 
WHERE id = 'your-booking-id';
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- `status = 'declined'`
- `updated_at` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ

### 7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- –¢—É—Ä–∏—Å—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å email:
  - **–¢–µ–º–∞:** "Booking Declined - Rainbow Tour Guides"
  - **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏
  - **–°—Å—ã–ª–∫–∞:** –ù–∞ –¥–µ—Ç–∞–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üé¨ –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü–æ–ø—ã—Ç–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—å —á—É–∂–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Dev Tools** (F12) ‚Üí Network
2. **–ù–∞–π–¥–∏—Ç–µ –ª—é–±–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥—Ä—É–≥–æ–≥–æ –≥–∏–¥–∞ –≤ –ë–î:
```sql
SELECT id, guide_id FROM bookings WHERE status = 'pending' LIMIT 1;
```
3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å PATCH –∑–∞–ø—Ä–æ—Å** —Å —ç—Ç–∏–º ID
4. **–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞:** 403 Forbidden "You are not authorized to update this booking"

### –ü–æ–ø—ã—Ç–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–µ-pending –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ù–∞–π–¥–∏—Ç–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å –¥—Ä—É–≥–∏–º —Å—Ç–∞—Ç—É—Å–æ–º:
```sql
SELECT id FROM bookings WHERE status = 'accepted' LIMIT 1;
```
2. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å**
3. **–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞:** 400 "Cannot update booking with status: accepted"

---

## üé¨ –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã —Ç—É—Ä–∏—Å—Ç–∞

### 1. –í—ã–π–¥–∏—Ç–µ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ –≥–∏–¥–∞
```
http://localhost:3000/auth/sign-out
```

### 2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Ç—É—Ä–∏—Å—Ç
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–≤–∞–ª –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ `/traveler/bookings`

### 4. –ï—Å–ª–∏ –≥–∏–¥ –ø—Ä–∏–Ω—è–ª (Accepted):
- [x] –°—Ç–∞—Ç—É—Å "Accepted" (—Å–∏–Ω–∏–π badge)
- [x] –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–Ω–æ–ø–∫–∞ "Pay Now" (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞)
- [x] –ö–Ω–æ–ø–∫–∞ "Message" –¥–ª—è —Å–≤—è–∑–∏ —Å –≥–∏–¥–æ–º

### 5. –ï—Å–ª–∏ –≥–∏–¥ –æ—Ç–∫–ª–æ–Ω–∏–ª (Declined):
- [x] –°—Ç–∞—Ç—É—Å "Declined" (–∫—Ä–∞—Å–Ω—ã–π badge)
- [x] –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ –≤–∫–ª–∞–¥–∫–µ "Past" –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ

---

## üêõ –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–Ω–æ–ø–∫–∏ Accept/Decline –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –≤–æ—à–ª–∏ –∫–∞–∫ –≥–∏–¥
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è = "pending"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: "Failed to accept/decline booking"
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Dev Tools ‚Üí Network ‚Üí –Ω–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ guide_id —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –≤–∞—à–∏–º ID
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–æ—Å—å –≤ –¥—Ä—É–≥—É—é –≤–∫–ª–∞–¥–∫—É
**–†–µ—à–µ–Ω–∏–µ:**
1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤ –ë–î
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### –ü—Ä–æ–±–ª–µ–º–∞: Email –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `RESEND_API_KEY` –∏ `EMAIL_FROM`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ - —Ç–∞–º –±—É–¥—É—Ç –æ—à–∏–±–∫–∏ email
3. Email –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –°—á—ë—Ç—á–∏–∫ –≤ sidebar –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
- –°—á—ë—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5) –∏–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ Accept

- [ ] –ö–Ω–æ–ø–∫–∞ "Accept" –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–ª—è pending –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- [ ] –ü—Ä–∏ –∫–ª–∏–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –û–±–µ –∫–Ω–æ–ø–∫–∏ disabled –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –ü–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ "Upcoming"
- [ ] –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ "Accepted" (—Å–∏–Ω–∏–π)
- [ ] –°—á—ë—Ç—á–∏–∫ "Requests" —É–º–µ–Ω—å—à–∏–ª—Å—è
- [ ] –í –ë–î status = "accepted" –∏ –µ—Å—Ç—å accepted_at
- [ ] Email –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —Ç—É—Ä–∏—Å—Ç—É (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω SMTP)
- [ ] –£ —Ç—É—Ä–∏—Å—Ç–∞ —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏–ª—Å—è

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ Decline

- [ ] –ö–Ω–æ–ø–∫–∞ "Decline" –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–ª—è pending –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- [ ] –ü—Ä–∏ –∫–ª–∏–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- [ ] –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –∫–Ω–æ–ø–∫–æ–π "Keep Request"
- [ ] –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –ü–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ "Cancelled"
- [ ] –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ "Declined" (–∫—Ä–∞—Å–Ω—ã–π)
- [ ] –°—á—ë—Ç—á–∏–∫ "Requests" —É–º–µ–Ω—å—à–∏–ª—Å—è
- [ ] –í –ë–î status = "declined"
- [ ] Email –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —Ç—É—Ä–∏—Å—Ç—É (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω SMTP)
- [ ] –£ —Ç—É—Ä–∏—Å—Ç–∞ —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏–ª—Å—è

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫:
- **–®–∞–≥ 5:** –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è `/guide/bookings/[id]`
- **–§—É–Ω–∫—Ü–∏—è –æ–ø–ª–∞—Ç—ã:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Stripe –¥–ª—è –ø—Ä–∏–Ω—è—Ç—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- **Messaging:** –ß–∞—Ç –º–µ–∂–¥—É —Ç—É—Ä–∏—Å—Ç–æ–º –∏ –≥–∏–¥–æ–º
- **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç—É—Ä–∞:** –ö–Ω–æ–ø–∫–∞ "Mark as Completed"

---

## üìä –ü–æ–ª–Ω—ã–π flow –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```
1. –¢—É—Ä–∏—Å—Ç —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø—Ä–æ—Å ‚Üí status: "pending"
2. –ì–∏–¥ –ø–æ–ª—É—á–∞–µ—Ç email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
3. –ì–∏–¥ –≤–∏–¥–∏—Ç –∑–∞–ø—Ä–æ—Å –≤–æ –≤–∫–ª–∞–¥–∫–µ "Requests"
4. –ì–∏–¥ –Ω–∞–∂–∏–º–∞–µ—Ç "Accept" ‚Üí status: "accepted"
5. –¢—É—Ä–∏—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
6. –¢—É—Ä–∏—Å—Ç –≤–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É "Pay Now"
7. –¢—É—Ä–∏—Å—Ç –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç ‚Üí status: "paid"
8. –ì–∏–¥ –∏ —Ç—É—Ä–∏—Å—Ç –ø–æ–ª—É—á–∞—é—Ç email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
9. –ü–æ—Å–ª–µ —Ç—É—Ä–∞ ‚Üí status: "completed"
10. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤—ã
```

---

## üîç –ü–æ–ª–µ–∑–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ pending –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≥–∏–¥–∞
```sql
SELECT 
  b.id,
  b.status,
  b.start_at,
  t.full_name as traveler_name,
  g.full_name as guide_name
FROM bookings b
LEFT JOIN profiles t ON b.traveler_id = t.id
LEFT JOIN profiles g ON b.guide_id = g.id
WHERE b.guide_id = 'your-guide-id'
  AND b.status = 'pending'
ORDER BY b.created_at DESC;
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```sql
SELECT 
  id,
  status,
  created_at,
  accepted_at,
  confirmed_at,
  completed_at,
  cancelled_at,
  updated_at
FROM bookings
WHERE id = 'your-booking-id';
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
```sql
SELECT 
  status,
  COUNT(*) as count
FROM bookings
WHERE guide_id = 'your-guide-id'
GROUP BY status;
```
