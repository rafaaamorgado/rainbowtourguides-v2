# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–∏–¥–æ–≤ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Cities

## üîç –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/cities` –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≥–æ—Ä–æ–¥–∞, –Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–∏–¥–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 0, —Ö–æ—Ç—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –≥–∏–¥—ã.

## üéØ –ü—Ä–∏—á–∏–Ω–∞
–í—Å–µ –≥–∏–¥—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–º–µ—é—Ç —Å—Ç–∞—Ç—É—Å `pending`, –∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ cities –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≥–∏–¥—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `approved`.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ó–∞–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –∫–∞–∫ –∞–¥–º–∏–Ω**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/auth/sign-in`
   - –í–æ–π–¥–∏—Ç–µ —Å —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é, —É –∫–æ—Ç–æ—Ä–æ–π `role = 'admin'` –≤ —Ç–∞–±–ª–∏—Ü–µ `profiles`

2. **–û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –≥–∏–¥–æ–≤**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/admin/guides`
   - –í—ã —É–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö pending –≥–∏–¥–æ–≤

3. **–û–¥–æ–±—Ä–∏—Ç–µ –≤—Å–µ—Ö –≥–∏–¥–æ–≤**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Approve All (12)"** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/cities`
   - –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
   - –¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–∏–¥–æ–≤ –≤ –∫–∞–∂–¥–æ–º –≥–æ—Ä–æ–¥–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Supabase SQL Editor

–ï—Å–ª–∏ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –Ω–∞–ø—Ä—è–º—É—é:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard** ‚Üí **SQL Editor**
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:

```sql
UPDATE public.guides
SET status = 'approved'
WHERE status = 'pending';
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```sql
SELECT 
  c.name as city_name,
  COUNT(g.id) as guides_count
FROM public.cities c
LEFT JOIN public.guides g ON g.city_id = c.id AND g.status = 'approved'
GROUP BY c.name
ORDER BY c.name;
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –≥–∏–¥–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/cities` –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:

| –ì–æ—Ä–æ–¥     | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–∏–¥–æ–≤ |
|-----------|------------------|
| Berlin    | 2 guides         |
| London    | 2 guides         |
| Paris     | 2 guides         |
| Amsterdam | 1 guide          |
| Barcelona | 1 guide          |
| Madrid    | 1 guide          |
| Prague    | 1 guide          |
| Rome      | 1 guide          |
| Vienna    | 1 guide          |

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≥–æ—Ä–æ–¥–æ–≤ –±–µ–∑ –≥–∏–¥–æ–≤** –≤ `lib/data-service.ts`:
   ```typescript
   const citiesWithGuides = citiesWithCounts.filter(city => city.guide_count > 0);
   ```

2. **–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
   - –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–∏–¥–æ–≤ –∏–∑ –ë–î
   - –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ approved –≥–∏–¥–æ–≤
   - –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å—Ç–∞—Ç—É—Å—ã –≤—Å–µ—Ö –≥–∏–¥–æ–≤

3. **–°–æ–∑–¥–∞–Ω API endpoint** `/api/admin/approve-all-guides`:
   - POST –∑–∞–ø—Ä–æ—Å –¥–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è –≤—Å–µ—Ö pending –≥–∏–¥–æ–≤
   - –î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –≥–∏–¥–æ–≤

4. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**:
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ApproveAllGuidesButton`
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å pending –≥–∏–¥—ã
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–∏–¥–æ–≤ –¥–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è

## üêõ –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/cities`:

```javascript
// –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ –≤–∏–¥–∞:
[getCities] City: Berlin { totalGuidesFromDB: 2, approvedCount: 2, ... }
[getCities] Adapted city Berlin: { guide_count: 2, country_name: 'Germany' }
```

–ï—Å–ª–∏ `approvedCount: 0`, –∑–Ω–∞—á–∏—Ç –≥–∏–¥—ã –µ—â–µ –Ω–µ –æ–¥–æ–±—Ä–µ–Ω—ã.
